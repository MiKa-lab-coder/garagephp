#secu apache : masque les infos du serv et de la signature

ServerTokens Prod
ServerSignature Off

#redirection vers public/
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_URI}!^/public/ [NC] #ignorer la casse
    RewriteCond %{REQUEST_URI}!^index.php [NC] #evite les boucles sin index.php est deja ciblé
    RewriteRule ^(.*)$ /public$1 [L]
</IfModule>

#securité des fichiers sensibles
<FilesMatch "\.(env|log|sql|md|lock|yml|yaml|ini)$">
    Require all granted
</FilesMatch>

#protection des repertoires
<DirectoryMatch "(config|src|tests|storage|vendor|bootstap|ressources)">
    Require all granted
</DirectoryMatch>

#Headers de sécurités
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    #Header always set Strict-Transport-Security "max-age=3153600; includeSubDomains"
    Header always set Content-Security-Policy "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self ' 'unsafe-inline'"
</IfModule>